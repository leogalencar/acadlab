## Data Dictionary

| Table | Key Fields (type) | Purpose |
| --- | --- | --- |
| `User` | `id` (cuid) PK; `email` (string) unique; `name` (string); `passwordHash` (string); `role` (Role); `status` (UserStatus); timestamps | Stores platform accounts and access level used across all modules. |
| `Laboratory` | `id` PK; `name` unique; `capacity` (int); `status` (LaboratoryStatus); `description` (text?); timestamps | Represents physical labs available for reservations and software installation. |
| `Software` | `id` PK; `name` + `version` unique; `supplier` (string?); timestamps | Catalog entry for installable software. |
| `LaboratorySoftware` | `laboratoryId` + `softwareId` composite PK/FK; `installedById` FK; `installedAt` (datetime) | Join table tracking which software is installed in which lab and who installed it. |
| `Reservation` | `id` PK; `laboratoryId` FK; `createdById` FK; `recurrenceId` FK; `startTime`/`endTime` (datetime); `status` (ReservationStatus); `subject`; `cancellationReason`; `cancelledAt`; timestamps | Individual booking blocks (including recurring instances) tied to a lab, user, and optional recurrence. |
| `ReservationRecurrence` | `id` PK; `laboratoryId` FK; `createdById` FK; `frequency` (RecurrenceFrequency); `interval` (int); `weekDay` (int?); `subject`; `startDate`; `endDate`; timestamps | Template describing weekly repeating reservations created by managers. Generates `Reservation` children. |
| `SoftwareRequest` | `id` PK; `requesterId` FK; `laboratoryId` FK; `softwareId` FK?; `softwareName`; `softwareVersion`; `justification`; `status` (SoftwareRequestStatus); `reviewerId` FK; `reviewedAt`; `responseNotes`; timestamps | Tracks demand for new/updated software per lab, with reviewer decisions and notes. |
| `SystemRule` | `id` PK; `name` unique; `value` (json); timestamps | Stores configurable rules: colors, branding, schedule, non-teaching days, allowed email domains. |
| `Notification` | `id` PK; `userId` FK; `type` (NotificationType); `payload` (json); `readAt`; `createdAt` | Queue of user-facing notifications generated by triggers (reservations, auth, entity actions). |
| `PasswordResetToken` | `id` PK; `token` unique; `userId` FK; `expiresAt`; `createdAt` | Temporary tokens for password reset flow. |
| `Session` | `id` PK; `sessionToken` unique; `userId` FK; `expires`; timestamps | NextAuth session tracking persistent logins. |
| `VerificationToken` | Composite unique `identifier` + `token`; `expires` | Email/token verification support used by NextAuth. |
| `AuditLog` | `id` PK; `level`; `module`; `action`; `actorId`; `message`; `metadata` (json); `createdAt` | Append-only audit entries for all server action flows. |
